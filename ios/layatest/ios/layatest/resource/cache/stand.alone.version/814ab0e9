function LoadingScene(){Laya.Sprite.call(this),this.imagesWeight=.7,this.fontsWeight=.1,this.animsWeight=.2;var e=[{url:["loading/progress.png","loading/progress$bar.png"],type:laya.net.Loader.IMAGE}];Laya.loader.load(e,laya.utils.Handler.create(this,this.loadLoadingRes))}function MainScene(){MainScene.super(this)}var JSExtern={inherits:function(e,a){var n=function(){};n.prototype=a.prototype,e.prototype=new n,e.prototype.constructor=e},getSimpleTime:function(){var e=new Date;return e.getHours()+"-"+e.getMinutes()+" "+e.getSeconds()+"."+e.getMilliseconds()},log:function(e,a,n){var t=e;a&&(t+=a),n&&(t+=n),console.log(t)},error:function(e,a,n){var t="!!!error ";t+=e,a&&(t+=a),n&&(t+=n),console.error(t)},setStringFormat:function(){String.prototype.format=function(){if(0==arguments.length)return this;for(var e=this,a=0;a<arguments.length;++a)e=e.replace("{"+a+"}",arguments[a]);return e}}},AnimationsConfig={root:"Animation/",breakExplode:"Break_Explode",breakPo:"Break_Po",ribbonGrey:"Ribbon_Grey",ribbonRed:"Ribbon_Red",setBottom:"SetBottom",tractor:"Tractor",victory:"Victory",timeWarning:"TimeWarning",anims:[{name:"Break_Explode",path:"Break/Explode/",begin:0,num:10},{name:"Break_Po",path:"Break/Po/",begin:0,num:2},{name:"Ribbon_Grey",path:"Ribbon/Grey/",begin:0,num:6},{name:"Ribbon_Red",path:"Ribbon/Red/",begin:0,num:8},{name:"SetBottom",path:"SetBottom/",begin:0,num:10},{name:"Tractor",path:"Tractor/",begin:0,num:5},{name:"Victory",path:"Victory/",begin:0,num:11},{name:"TimeWarning",path:"Warning/",begin:0,num:6}],init:function(){for(var e=0;e<this.anims.length;++e){var a=this.anims[e],n=this.getImages(this.root+a.path,a.begin,a.num);Laya.Animation.createFrames(n,a.name)}},getImages:function(e,a,n){for(var t=[],o=0;o<n;++o){var i=e;i+=o<=9?"0"+o+".png":o+".png",t.push(i)}return t}},FontsRes={fontRoot:"Font/",scoreNumber:"scoreNumber",clockNumber:"clock_number",names:["scoreNumber","clock_number"],files:["scoreNumber.fnt","clock_number.fnt"]},ImagesRes=[{url:["res/atlas/game.json","res/atlas/cards.json","res/atlas/GameButton.json","res/atlas/GameInfo.json","res/atlas/PlayerInfo.json","res/atlas/HeadImage.json","res/atlas/LastCards.json","res/atlas/Result.json","res/atlas/Animation/Break/Explode.json","res/atlas/Animation/Break/Po.json","res/atlas/Animation/Ribbon/Grey.json","res/atlas/Animation/Ribbon/Red.json","res/atlas/Animation/SetBottom.json","res/atlas/Animation/Tractor.json","res/atlas/Animation/Victory.json","res/atlas/Animation/Warning.json","res/atlas/Countdown.json"],type:laya.net.Loader.ATLAS},{url:["back.png"],type:laya.net.Loader.IMAGE}],LocalConfig={showLog:!1,showDlgMaskEvent:"showDlgMaskEvent",hideDlgMaskEvent:"hideDlgMaskEvent"},ScoreInfo={scoreRule:[{winDouble:0,winHalf:-1,breakHalf:-1,breakDouble:10},{winDouble:0,winHalf:5,breakHalf:15,breakDouble:20},{winDouble:0,winHalf:5,breakHalf:20,breakDouble:30},{winDouble:0,winHalf:10,breakHalf:30,breakDouble:40},{winDouble:0,winHalf:10,breakHalf:35,breakDouble:50},{winDouble:0,winHalf:15,breakHalf:45,breakDouble:60},{winDouble:0,winHalf:15,breakHalf:50,breakDouble:70},{winDouble:0,winHalf:20,breakHalf:60,breakDouble:80},{winDouble:0,winHalf:20,breakHalf:65,breakDouble:90},{winDouble:0,winHalf:25,breakHalf:75,breakDouble:100},{winDouble:0,winHalf:25,breakHalf:80,breakDouble:110},{winDouble:0,winHalf:30,breakHalf:90,breakDouble:120},{winDouble:0,winHalf:30,breakHalf:95,breakDouble:130},{winDouble:0,winHalf:35,breakHalf:105,breakDouble:140},{winDouble:0,winHalf:35,breakHalf:110,breakDouble:150},{winDouble:0,winHalf:40,breakHalf:120,breakDouble:160},{winDouble:0,winHalf:40,breakHalf:125,breakDouble:170},{winDouble:0,winHalf:45,breakHalf:130,breakDouble:180},{winDouble:0,winHalf:45,breakHalf:135,breakDouble:190},{winDouble:0,winHalf:50,breakHalf:145,breakDouble:200},{winDouble:0,winHalf:50,breakHalf:150,breakDouble:200},{winDouble:0,winHalf:55,breakHalf:155,breakDouble:200},{winDouble:0,winHalf:55,breakHalf:160,breakDouble:200},{winDouble:0,winHalf:60,breakHalf:165,breakDouble:200},{winDouble:0,winHalf:60,breakHalf:170,breakDouble:200},{winDouble:0,winHalf:65,breakHalf:175,breakDouble:200},{winDouble:0,winHalf:65,breakHalf:180,breakDouble:200},{winDouble:0,winHalf:70,breakHalf:185,breakDouble:200}],isPo:function(e,a,n){var t=Math.floor(e/5)-1,o=this.scoreRule[t],i=a+n;return!(i<e)&&(a<e&&i>=e||(a>=e&&a<o.breakHalf&&i>=o.breakHalf||a>=o.breakHalf&&a<o.breakDouble&&i>=o.breakDouble))}},ServerConfig={itemType:{stone:0,vitality:1,recordCard:2,godeye:3,nothing:99},vitalityTip:"用{0}钻石购买{1}点体力？",vitalityItems:[[1,1],[2,2],[3,3],[4,6],[5,10],[10,25]],recordCardTip:"用{0}钻石购买{1}张记牌器？",recordCardItems:[[1,1],[2,2],[3,3],[4,6],[5,10],[10,50]],godeyeTip:"用{0}钻石开启上帝之眼？",godEyeItem:5,noGoldTip:"金币不足",buySuccess:"购买成功",buyFail:"购买失败"},SoundRoot="sound/",SoundMan="sound/man/",SoundWoman="sound/woman/",SoundsConfig={on:!0,deal:SoundRoot+"deal.ogg",playcard:SoundRoot+"playcard.ogg",buyaoFirst:"buyao0.wav",buyaoLists:["buyao0.wav","buyao1.wav","buyao2.wav","buyao3.wav"],singleCard:["2.wav","3.wav","4.wav","5.wav","6.wav","7.wav","8.wav","9.wav","10.wav","11.wav","12.wav","13.wav","1.wav","14.map3","15.map3"],pairCard:["dui2.wav","dui3.wav","dui4.wav","dui5.wav","dui6.wav","dui7.wav","dui8.wav","dui9.wav","dui10.wav","dui11.wav","dui12.wav","dui13.wav","dui1.wav","dui14.map3","dui15.map3"],dani:["dani0.wav","dani1.wav"],liandui:"liandui.wav",throwcard:"throwcard.wav",kill:"kill.wav",getmain:"getmain.wav",follow:"follow.wav",win:"win.wav",lose:"lose.ogg",onesuit:["onefangkuai.wav","onemeihua.wav","onehongtao.wav","oneheitao.wav"],duisuit:["duifangkuai.wav","duimeihua.wav","duihongtao.wav","duiheitao.wav"],playSound:function(e){if(e.indexOf(".wav")<0&&e.indexOf(".ogg")<0&&e.indexOf(".wav")<0){return void 32}1==this.on&&Laya.SoundManager.playSound(e)},getGenderRoot:function(e){return 1==e?SoundMan:SoundWoman},_playBuyao:function(e,a){var n=this.getGenderRoot(a),t=n;if(1==e)t+=this.buyaoFirst;else{var o=Math.floor(Math.random()*this.buyaoLists.length);t+=this.buyaoLists[o]}this.playSound(t)},_playSingleCard:function(e,a){var n=this.getGenderRoot(a),t=n+this.singleCard[e];this.playSound(t)},_playPairCard:function(e,a){var n=this.getGenderRoot(a),t=n+this.pairCard[e];this.playSound(t)},_playDani:function(e){var a=this.getGenderRoot(e),n=Math.floor(Math.random()*this.dani.length),t=a+this.dani[n];this.playSound(t)},_playLiandui:function(e){var a=this.getGenderRoot(e),n=a+this.liandui;this.playSound(n)},_playOneSuit:function(e,a){var n=this.getGenderRoot(a),t=n+this.onesuit[e];this.playSound(t)},_playDuiSuit:function(e,a){var n=this.getGenderRoot(a),t=n+this.duisuit[e];this.playSound(t)},_playShuaipai:function(e,a){var n=this.getGenderRoot(a),t=n+this.throwcard;this.playSound(t)},_playeDiaozhu:function(e){var a=this.getGenderRoot(e),n=a+this.getmain;this.playSound(n)},_playeFollow:function(e){var a=this.getGenderRoot(e),n=a+this.follow;this.playSound(n)},_playeBile:function(e){var a=this.getGenderRoot(e),n=a+this.kill;this.playSound(n)},playSelectScoreSound:function(e){1==e.pass&&this._playBuyao(e.firstCall,e.isMan)},playCardSound:function(e){var a=e.isMan;if(1==e.isFirst){if(1==e.isMess)return void this._playShuaipai(a);1==e.isMajor?this._playeDiaozhu(a):1==e.isLiandui?this._playLiandui(a):1==e.isPair?this._playDuiSuit(e.suit,a):this._playOneSuit(e.suit,a)}else 1==e.isBigger?1==e.isBile?this._playeBile(a):this._playDani(a):this._playeFollow(a)}},TextsConfig={helpPanel:{abstract:"法新社27日报道称，根据官方数据，中国14亿人口当中还有近2亿人没有结婚。在8月28日(周一)中国版的情人节前后，很多商家瞄准单身人群的消费特征，用心推销自己的产品。如中国一家火锅餐馆，会在独自一人用餐的顾客对面放一只泰迪熊，这种服务主要瞄准相对年轻顾客。餐馆经理表示，泰迪熊会使顾客“不会感到孤单。\n         还有商家推出吐着舌头的狗狗形状的蛋糕，虽然这种蛋糕售价比一般蛋糕要贵20%，但是却占了销售的15%。有蛋糕店职员表示，“大家会买这样的蛋糕送给朋友，开一个善意的玩笑”。在一家鲜花店里，店主为单身人士提供一种包裹在玻璃里的干玫瑰。他相信会在七夕节这天热销，“单身人士也能给他们自己送花”。甚至美国的快餐连锁店汉堡王也在七夕节这天，为单身人士提供打折的特殊套餐。",base:"基本玩法",advanced:"高级教程",contact:"联系我们。。。。。"}};window.screenWidth=1280,window.screenHeight=720,document.bgColor="#552570",Laya.init(window.screenWidth,window.screenHeight,laya.webgl.WebGL),Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.scaleMode=Laya.Stage.SCALE_EXACTFIT,Laya.stage.screenMode=Laya.Stage.SCREEN_NONE,Laya.Stat.show(0,0),Laya.stage.frameRate="mouse","undefined"!=typeof conch&&(JSExtern.log("====>conch sOS:",conch.config.getOS()),conch.config.setSlowFrame(!0)),void 0!==Laya.Render&&(JSExtern.log("====>Laya.Render:","false","true"),JSExtern.log("===>Laya.Render isConchNode:",1==Laya.Render.isConchNode?"true":"false"),JSExtern.log("====>Laya.Render isConchApp:",1==Laya.Render.isConchApp?"true":"false"),JSExtern.log("===>Laya.Render isConchWebGL:",1==Laya.Render.isConchWebGL?"true":"false"),JSExtern.log("====>Laya.Render isWebGL:",1==Laya.Render.isWebGL?"true":"false"),JSExtern.log("====>Laya.Render is3DMode:",1==Laya.Render.is3DMode?"true":"false")),JSExtern.setStringFormat(),JSExtern.inherits(LoadingScene,Laya.Sprite),LoadingScene.prototype.loadLoadingRes=function(){var e=new laya.ui.ProgressBar("loading/progress.png");e.pos(50,300),e.width=300,e.sizeGrid="5,5,5,5",e.value=0,e.preValue=0,e.changeHandler=new Laya.Handler(this,function(e){}),this.addChild(e),this.progressBar=e,this.loadImages()},LoadingScene.prototype.loadImages=function(){function e(e){if(this.progressBar.value=this.progressBar.preValue+this.imagesWeight*e,e>=1){var a=(new Date).getTime();trace("load images end:"+a+", usetime:"+(a-this.loadImagesTiem)+"ms"),this.progressBar.preValue=this.imagesWeight,this.loadFont()}}var a=(new Date).getTime();JSExtern.log("begin load res:"+a),JSExtern.log("begin load image:"+a),this.loadTime=a,this.loadImagesTiem=a,Laya.loader.load(ImagesRes,null,Laya.Handler.create(this,e.bind(this),null,!1))},LoadingScene.prototype.loadFont=function(){function e(e,a){var n=FontsRes.names[e];a.setSpaceWidth(10),Laya.Text.registerBitmapFont(n,a);var t=FontsRes.fontRoot+FontsRes.files[e];if(JSExtern.log("load font:",e," ",t),this.progressBar.value=this.progressBar.preValue+this.fontsWeight*((e+1)/FontsRes.files.length),e+1==FontsRes.files.length){var o=(new Date).getTime();JSExtern.log("lond font end:"+o+", usetime:"+(o-this.loadFontTiem)+"ms"),this.progressBar.preValue+=this.fontsWeight,this.loadAnimas()}}var a=(new Date).getTime();JSExtern.log("begin load font:"+a),this.loadFontTiem=a;for(var n=0;n<FontsRes.files.length;++n){var t=FontsRes.fontRoot+FontsRes.files[n],o=new Laya.BitmapFont,i=n;o.loadFont(t,new Laya.Handler(this,e.bind(this),[i,o]))}},LoadingScene.prototype.loadAnimas=function(){var e=(new Date).getTime();JSExtern.log("begin load anims:"+e),AnimationsConfig.init();var a=(new Date).getTime();JSExtern.log("end load animms:"+e+",usetime:"+(a-e)+"ms"),JSExtern.log("end load res:"+e+", usetime:"+(e-this.loadTime)+"ms"),this.progressBar.preValue+=this.animsWeight,this.progressBar.value=this.progressBar.preValue;var n=new Laya.Animation;n.interval=100,n.play(0,!0,AnimationsConfig.breakExplode),n.on(Laya.Event.COMPLETE,this,function(e){e.removeSelf(),this.loadFinish()}.bind(this),[n]),n.x=400,n.y=300,this.addChild(n);var t=n.getGraphicBounds();n.pivot(t.width/2,t.height/2)},LoadingScene.prototype.loadFinish=function(){Laya.stage.scene.destroy();var e=new MainScene;Laya.stage.scene=e,Laya.stage.addChild(e)};var loadingscene=new LoadingScene;Laya.stage.scene=loadingscene,Laya.stage.addChild(loadingscene),Laya.class(MainScene,"MainScene",MainSceneUI);var ContainerExtend={removeSet:function(e,a){for(var n=0,t=0;t<e.length;++t){var o=e[t];e[t-n]=o,1==a.has(o)&&++n}e.length-=n},removeArray:function(e,a){for(var n=0;n<a.length;++n)for(var t=0;t<e.length;++t)if(a[n]==e[t]){e[t]=null;break}for(var o=0,n=0;n<e.length;++n){var i=e[n];e[n-o]=i,null==i&&++o}e.length-=o},isArrayAtleastOneItemInSet:function(e,a){for(var n=0;n<a.length;++n)if(1==e.has(a[n]))return!0;return!1},includeItem:function(e,a){for(var n=0;n<e.length;++n)if(e[n]==a)return!0;return!1},addArrayToSet:function(e,a){for(var n=0;n<e.length;++n)a.add(e[n])},isArrayIncludeArray:function(e,a){for(var n=e.slice(0),t=0;t<a.length;++t){for(var o=!1,i=0;i<n.length;++i)if(a[t]==n[i]){o=!0,n[i]=void 0;break}if(0==o)return!1}return!0}},LayaExtend={swallowAllTouch:function(e){Laya.timer.frameOnce(1,null,function(){var a=laya.events.Event,n=new Laya.Sprite;n.zOrder=-2,e.addChild(n);var t=e.globalToLocal(new laya.maths.Point(0,0));n.pos(t.x,t.y),n.size(window.screenWidth,window.screenHeight),n.on(a.CLICK,null,function(e){e.stopPropagation()})})},convertPos:function(e,a){var n=e.parent.localToGlobal(new laya.maths.Point(e.x,e.y));return a.globalToLocal(n)},changeParent:function(e,a){var n=LayaExtend.convertPos(e,a);e.removeSelf(),e.pos(n.x,n.y),a.addChild(e)},getRectInWorld:function(e,a,n,t){var o=e.localToGlobal(a),i=e.localToGlobal(n);t.x=o.x,t.y=o.y,t.width=i.x-o.x,t.height=i.y-o.y}},MathClient={getFirstPos:function(e,a,n){if(e<=0||a<=0||n<=0)return 0;var t=n*a;return e<t?0:.5*e-.5*t},getFirstPosOfFoldItem:function(e,a,n,t){if(0==t||1==t)return.5*(e-n);var o=e-n;return MathClient.getFirstPos(o,a,t-1)},getIndexRange:function(e,a){for(var n=[],t=0;t<a.length;++t)for(var o=0;o<a[t].length;++o){var i=a[t][o];if(1==e.intersects(i)){n.push(t);break}}return n},getMergeRect:function(e,a){if(0==e.length)a.x=0,a.y=0,a.width=0,a.height=0;else{for(var n=e[0][0],t=n.x,o=n.x+n.width,i=n.y,r=n.y+n.height,l=0;l<e.length;++l)for(var s=0;s<e[l].length;++s){var u=e[l][s];u.x<t&&(t=u.x),u.x+u.width>o&&(o=u.x+u.width),u.y<i&&(i=u.y),u.y+u.height>r&&(r=u.y+u.height)}a.x=t,a.y=i,a.width=o-t,a.height=r-i}},getScaleForShowAll:function(e,a,n,t){return t<=1?1:e>=a*(t-1)+n?1:e/(a*(t-1)+n)},getRect:function(e,a){var n=new laya.maths.Rectangle;return e.x<=a.x?(n.x=e.x,n.width=a.x-e.x):(n.x=a.x,n.width=e.x-a.x),e.y<=a.y?(n.y=e.y,n.height=a.y-e.y):(n.y=a.y,n.height=e.y-a.y),n}},MathExtend={getSingle:function(e){for(var a=[],n=0;n<e.length;){if(n+1==e.length){a.push(e[n]);break}e[n]==e[n+1]?n+=2:(a.push(e[n]),++n)}return a},getPair:function(e){for(var a=[],n=0;n<e.length&&n+1!=e.length;)e[n]==e[n+1]?(a.push(e[n]),n+=2):++n;return a},getTargetIndex:function(e,a){for(var n=0;n<e.length;++n)if(e[n].id==a)return n;return-1},getShowIndex:function(e,a,n){return(MathExtend.getTargetIndex(a,n)+a.length-e)%a.length}},RandomExtend={getNoRepeat:function(e,a){if(!(0==e.length||a<=0||a>e.length)){for(var n=[],t=e.slice(0),o=e.length,i=0;i<a;++i){var r=Math.floor(Math.random()*o),l=t[r];n.push(l),t[r]=t[o-1],--o}return n}},getRandInt:function(e){return Math.floor(Math.random()*e)}};